# firsttry.toml — minimal, tier-symmetric checks
# Both Lite and Pro run the exact same LOCAL checks.
# Only difference: Pro enables Shared Remote Cache at runtime (code toggle below).

[tier_defaults]
# Always disable 3rd-party pytest autoload so runs are deterministic
pytest_disable_plugin_autoload = true

[timeouts]
default = 300
[timeouts.per_check]
ruff = 15
mypy = 60
pytest_fast = 120
bandit = 60
black = 30
isort = 20
config = 10       # firsttry.checks.config_parser
gitguard = 5      # firsttry.gitguard

# Profile used by pre-commit / quick runs
[profiles.precommit]
enabled = [
  "ruff",
  "config",
  "gitguard",
  "pytest_fast",
  "mypy",
  "bandit",
  "black",
  "isort"
]

# Tier policies: BOTH run the same local checks
[tiers.lite]
checks = [
  "ruff",
  "config",
  "gitguard",
  "pytest_fast",
  "mypy",
  "bandit",
  "black",
  "isort"
]
remote_cache = false

[tiers.pro]
checks = [
  "ruff",
  "config",
  "gitguard",
  "pytest_fast",
  "mypy",
  "bandit",
  "black",
  "isort"
]
remote_cache = true   # only delta vs lite

[render]
tty = { detailed_default_items = 10 }

[fail_policy]
# If any check fails → non-zero exit (blocks commit/CI)
strict = true

# Local cache ON by default; remote cache behavior is toggled in code (see patch below)
[cache]
local = true
remote = false   # leave false in config; Pro tier turns it on programmatically
