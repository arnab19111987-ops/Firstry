repos:
  # --- FAST pre-commit gates ---
  - repo: https://github.com/psf/black
    rev: 24.10.0
    hooks:
      - id: black

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        args: [--fix]
        stages: [commit]
      - id: ruff-format
        stages: [commit]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.11.2
    hooks:
      - id: mypy
        additional_dependencies: []
        stages: [push]

  # --- HEAVY parity only on push ---
  - repo: local
    hooks:
      - id: gh-workflow-lint
        name: GitHub Actions workflow linter
        entry: bash -lc './scripts/check-workflows.sh'
        language: system
        pass_filenames: false
        stages: [commit, push]

      - id: ft-pre-push
        name: FirstTry pre-push (CI parity, containerized)
        stages: [push]
        entry: bash -lc './scripts/ft-ci-local'
        language: system
        pass_filenames: false
